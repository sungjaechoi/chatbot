# 요청 분석: 20260203-가격계산-로직-제거

## 작업 개요

| 항목 | 내용 |
|------|------|
| **작업 ID** | 20260203-가격계산-로직-제거 |
| **분석 일시** | 2026-02-03 |
| **요청 요약** | 이전 워크플로우(vercel-ai-gateway-크레딧-표시)의 미해결 사항인 Gemini 가격 정보 부정확 문제를 해결하기 위해, 로컬 가격 계산 로직(calculateCost)을 제거하고 Vercel AI Gateway API 반환값을 그대로 사용하도록 수정 |

## 요구사항

### 기능 요구사항

1. pricing.ts의 calculateCost 함수 제거 또는 파일 삭제
2. rag.ts에서 calculateCost 호출 제거
3. AI SDK 응답에서 비용 정보가 있으면 그대로 사용, 없으면 0 또는 undefined로 처리
4. 메인 첫화면에 남은 금액 표시 (Credits API의 balance 값) - 기존 유지
5. 챗봇 화면 헤더에 남은 금액 표시 (Credits API의 balance 값) - 기존 유지
6. 응답 결과 시간 옆에 토큰과 금액 표시 (API 응답의 usage 값 그대로) - 기존 유지

### 비기능 요구사항

- 빌드 에러 없음
- 타입 정합성 유지

## 작업 범위

| 영역 | 작업 내용 |
|------|-----------|
| **Backend** | pricing.ts 수정/삭제, rag.ts 비용 계산 로직 제거 |
| **Frontend** | total_cost가 0/undefined일 때 UI 처리 확인 |

## 완료 조건

- [ ] calculateCost 함수가 더 이상 사용되지 않음
- [ ] API 응답의 비용 정보(또는 0)가 프론트엔드까지 정상 전달됨
- [ ] 빌드 성공 (npm run build)
- [ ] 타입 에러 없음

## 실행 계획

| 순서 | 에이전트 | 작업 내용 |
|------|----------|-----------|
| 1 | backend-developer | pricing.ts 수정/삭제, rag.ts calculateCost 호출 제거 |
| 2 | frontend-developer | total_cost undefined/0 처리 확인 |
| 3 | reviewer | 코드 품질 검증 및 빌드 테스트 |

## 리스크 및 주의사항

- AI SDK streamText 응답에 cost 필드가 없을 수 있음 - 0으로 대체 필요
- formatCost 함수가 다른 곳에서 사용될 경우 유지 필요

---
*생성: Orchestrator | 일시: 2026-02-03*
