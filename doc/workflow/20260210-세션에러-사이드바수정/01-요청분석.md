# 요청 분석: 20260210-세션에러-사이드바수정

## 작업 개요

| 항목 | 내용 |
|------|------|
| **작업 ID** | 20260210-세션에러-사이드바수정 |
| **분석 일시** | 2026-02-10 17:00 |
| **요청 요약** | 이전 작업(다중세션-사이드바)에서 발생한 2가지 수정 사항: (1) DB 마이그레이션 미적용으로 인한 세션 생성 서버 에러 해결, (2) 사이드바를 헤더 로고 아래에 배치하고 사이드바 자체 로고 제거 |

## 요구사항

### 기능 요구사항

1. title/last_message_at 컬럼이 DB에 없어도 세션 생성/조회/삭제가 정상 동작해야 함
2. 사이드바가 기존 메인 헤더(Document Chat 로고) 아래에서 시작되어야 함
3. 사이드바의 자체 로고/헤더 영역(Document Chat 아이콘+텍스트)이 제거되어야 함

### 비기능 요구사항

- 마이그레이션 SQL 적용 후에는 title/last_message_at 기능이 정상 동작해야 함
- 데스크탑/모바일 레이아웃 모두 정상 동작

## 작업 범위

| 영역 | 작업 내용 |
|------|-----------|
| **Backend** | chat-service.ts의 세션 관련 함수에서 title/last_message_at 참조 제거 및 방어적 처리 |
| **Frontend** | ChatLayout 레이아웃 재구성(헤더 전체 너비 → 아래에 사이드바+채팅), ChatSidebar 자체 로고 제거 |

## 완료 조건

- [ ] 세션 생성 API 호출 시 서버 에러 없이 정상 응답
- [ ] 세션 목록 조회 API 정상 동작
- [ ] 사이드바가 메인 헤더 아래에 위치
- [ ] 사이드바 자체 로고/헤더가 제거됨
- [ ] 데스크탑/모바일 모두 레이아웃 정상
- [ ] npm run build 통과

## 실행 계획

| 순서 | 에이전트 | 작업 내용 |
|------|----------|-----------|
| 1 | backend-developer | chat-service.ts 방어적 수정 - title/last_message_at 참조 제거 |
| 2 | frontend-developer | ChatLayout 레이아웃 재구성 + ChatSidebar 자체 로고 제거 |
| 3 | reviewer | 백엔드 방어적 코딩 + 프론트엔드 레이아웃 변경 품질 검증 |

## 리스크 및 주의사항

- title/last_message_at 제거 후 관련 타입(ChatSessionRow, ChatSession)과 API 응답 매핑에서 타입 불일치 발생 가능
- 레이아웃 변경 시 모바일 overlay 사이드바 동작이 깨질 수 있음
- 향후 마이그레이션 적용 시 다시 코드를 변경해야 할 수 있음

---
*생성: Orchestrator | 일시: 2026-02-10 17:00*
